@{
    ViewBag.Title = "SearchResults";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="page-header">
<h1>
    SearchResults</h1>
    </div>
@if (ViewBag.theatre != null)
{
    @ViewBag.theatre.Name
}
@if (ViewBag.movie != null)
{
    @ViewBag.movie.MovieName
}
@if (ViewBag.scheduleList == null)
{
    <div>
        No shows found for the search criteria
    </div>
}
@*@if (ViewBag.scheduleList != null)
{
    foreach (var schedule in ViewBag.scheduleList)
    {
        if (schedule.hall != null)
        {
    <li>@schedule.hall.HallName </li>
        }
    <li>@schedule.ScheduleDate </li>
    



    }

}*@
    
 <table class="table table-striped table-bordered">
@if (ViewBag.schedulesByHall != null)
{
    <tbody>       
    @foreach (var pair in ViewBag.schedulesByHall)
    {
          <tr>
          <td> @pair.Key </td>
           <td>
             
            @foreach (var schedule in @pair.Value)
            {
                if (schedule.items != null)
                {
                    foreach (var item in @schedule.items)
                    {
                        <div>  
                     
                        @Html.ActionLink((string)@item.TimeSlotID, "SelectSeats", new { id = @item.ID})
                     
                        </div>
                    }

                }
            }
            </td>
        </tr>
    }
    </tbody>
    
}
</table>