@{
    ViewBag.Title = "SearchResults";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="page-header">
<h1>
    SearchResults</h1>
    </div>

<div class="well">
      <h1>@ViewBag.movie.MovieName</h1>
  <p> <img src=@ViewBag.movie.ImageMoviePath alt=@ViewBag.movie.MovieName width='150px' height='200px'></p>
  <a class='btn btn-primary large fancybox-media' href=@ViewBag.movie.trailer_url> Watch Trailer </a>
  <p>
  </p>
</div>

@*@if (ViewBag.theatre != null)
{
    @ViewBag.theatre.Name
}*@
@*@if (ViewBag.movie != null)
{
    @ViewBag.movie.MovieName
}*@
@if (ViewBag.scheduleList == null)
{
    <div>
        No shows found for the search criteria
    </div>
}
@*@if (ViewBag.scheduleList != null)
{
    foreach (var schedule in ViewBag.scheduleList)
    {
        if (schedule.hall != null)
        {
    <li>@schedule.hall.HallName </li>
        }
    <li>@schedule.ScheduleDate </li>
    



    }

}*@
    
 <table class="table table-striped table-bordered">
@if (ViewBag.schedulesByHall != null)
{
    <tbody>       
    @foreach (var pair in ViewBag.schedulesByHall)
    {
          <tr>
          <td> @pair.Key </td>
           <td>
             
            @foreach (var schedule in @pair.Value)
            {
                if (schedule.items != null)
                {
                    foreach (var item in @schedule.items)
                    {
                        <div>  
                     
                        @Html.ActionLink((string)@item.TimeSlotID, "SelectSeats", new { id = @item.ID, date = @ViewBag.day_select})
                     
                        </div>
                    }

                }
            }
            </td>
        </tr>
    }
    </tbody>
    
}
</table>

<script type="text/javascript">
    $(document).ready(function () {
        $('.fancybox-media').fancybox({
            openEffect: 'none',
            closeEffect: 'none',
            helpers: {
                media: {}
            }
        });
    });
</script>