@{
    ViewBag.Title = "SearchResults";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script type="text/javascript">
    $(document).ready(function () {
        $('.fancybox').fancybox();
    });

</script>
<div class="page-header">
    <h1>
        SearchResults</h1>
</div>
<div class="well">
    <div class="row-fluid">
        <div class="span12">
            <div class="span4">
                <h1>@ViewBag.movie.MovieName</h1>
                <p>
                    <img src=@ViewBag.movie.ImageMoviePath alt=@ViewBag.movie.MovieName width='150px' height='200px'></p>
                <a class='btn btn-primary large fancybox-media' href=@ViewBag.movie.trailer_url>Watch
                    Trailer </a>
                <p>
                </p>
            </div>
            <div class="span4">
                <table class="table">
                    <tr>
                        <td>
                            Movie
                        </td>
                        <td>
                            @ViewBag.movie.MovieName
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Cast
                        </td>
                        <td>
                            Robert Downey Jr., Chris Evans, Mark Ruffalo
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Description
                        </td>
                        <td>
                            Nick Fury of S.H.I.E.L.D. brings together a team of super humans to form The Avengers
                            to help save the Earth from Loki and his army.
                        </td>
                    </tr>
                </table>
            </div>
            <div class="span3">
                <a href="" id="image_gallery" rel="gallery" class='fancybox'> <img src="../../images/movies/default.jpeg" /> </a>
                Image Gallery
                @foreach (var image in ViewBag.movieImages)
                {
                    <a rel="gallery" href=@image class='fancybox'>
                        <img src="#" alt='gallery' hidden='hidden'/>
                    </a>
                }
            </div>
        </div>
    </div>
</div>
@*@if (ViewBag.theatre != null)
{
    @ViewBag.theatre.Name
}*@ @*@if (ViewBag.movie != null)
{
    @ViewBag.movie.MovieName
}*@
@if (ViewBag.scheduleList == null)
{
    <div>
        No shows found for the search criteria
    </div>
}
@*@if (ViewBag.scheduleList != null)
{
    foreach (var schedule in ViewBag.scheduleList)
    {
        if (schedule.hall != null)
        {
    <li>@schedule.hall.HallName </li>
        }
    <li>@schedule.ScheduleDate </li>
    



    }

}*@
<table class="table table-striped table-bordered">
    @if (ViewBag.schedulesByHall != null)
    {
        <tbody>
            @foreach (var pair in ViewBag.schedulesByHall)
            {
                <tr>
                    <td>
                        @pair.Key
                    </td>
                    <td>
                        @foreach (var schedule in @pair.Value)
                        {
                            if (schedule.items != null)
                            {
                                foreach (var item in @schedule.items)
                                {
                            <div>
                                @Html.ActionLink((string)@item.TimeSlotID, "SelectSeats", new { id = @item.ID, date = @ViewBag.day_select })
                            </div>
                                }

                            }
                        }
                    </td>
                </tr>
            }
        </tbody>
    
    }
</table>
<script type="text/javascript">
    $(document).ready(function () {
        $('.fancybox-media').fancybox({
            openEffect: 'none',
            closeEffect: 'none',
            helpers: {
                media: {}
            }
        });
    });
</script>
